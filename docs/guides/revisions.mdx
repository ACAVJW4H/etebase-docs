---
title: Revision history
---

import CodeTabs from '@theme/CodeTabs';
import TabItem from '@theme/TabItem';


Every time you change a collection or an item, a new revision is created in Etebase. Each revision is a snapshot of the collection or item at that point in time so you can easily view and rollback changes.

This is very useful if you would like to offer a change history to your users, or even if you just want to make sure your data is never lost, even if you make a mistake.


## Listing revisions

Listing revisions returns normal items you can then manipulate like any others. The items are sorted newest to oldest.

<CodeTabs>
<TabItem value="js">

```js
const item = await itemManager.create(
  { type: "file", },
  "First draft",
);
await itemManager.batch([item]);

item.setContent("Second draft");
await itemManager.batch([item]);

const revisions = await itemManager.itemRevisions(item);
assert(revisions.data.length === 1);

// Revisions are normal items so we can use them as such
const content = await revisions.data[0].getContent();
assert(content === "First draft");


// Collections are just items, so for collection revisions:
const collectionRevisions = await itemManager.itemRevisions(collection.item);
```

</TabItem>
<TabItem value="py">

```python
item = item_mgr.create(
    {
        "type": "file",
    },
    b"First draft"
)
item_mgr.batch([item])

item.content = b"Second draft"
item_mgr.batch([item])

revisions = item_mgr.item_revisions(item)
assert(len(list(revisions.data)) == 1)

# Revisions are normal items so we can use them as such
content = list(revisions.data)[0].content
assert(content == b"First draft")


# Collections are just items, so for collection revisions:
col_revisions = item_mgr.item_revisions(collection.item)
```

</TabItem>
</CodeTabs>


## Iterating through revisions

Like the rest of the API, revisions can be iterated over.

<CodeTabs>
<TabItem value="js">

```js
let iterator = null;
while (true) {
  const revisions = await itemManager.itemRevisions(item, { iterator, limit: 5 });
  iterator = revisions.iterator;

  processRevisions(revisions.data);

  if (revisions.done) {
    break;
  }
}
```

</TabItem>
<TabItem value="py">

```python
item_mgr = col_mgr.get_item_manager(collection)
item = ...

iterator = None
done = False
while not done:
    fetch_options = FetchOptions().iterator(iterator).limit(30)
    revisions = item_mgr.item_revisions(item, fetch_options)
    iterator = revisions.iterator
    done = revisions.done

    process_outgoing_revisions(revisions.data)
```

</TabItem>
</CodeTabs>
